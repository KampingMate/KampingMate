<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>내가 본 캠핑장들</title>
    <link rel="stylesheet" th:href="@{/css/mypage.css}">
    <script>
        function toggleVisibility(dateId) {
            var x = document.getElementById(dateId);
            if (x.style.display === "none") {
                x.style.display = "block";
                document.getElementById(dateId + "-toggle").innerText = "-";
            } else {
                x.style.display = "none";
                document.getElementById(dateId + "-toggle").innerText = "+";
            }
        }
    </script>
</head>
<body class="recombody">
<!-- 헤더 -->
<th:block th:insert="~{include/header}"></th:block>

<!-- 메뉴 -->
<th:block th:insert="~{mypage/menu}"></th:block>
    <div class="recomcontainer">
        <h1 class="recomh1">내가 본 캠핑장들</h1>

        <div class="recommendations">
            <table class="recomtable">
                <thead>
                    <tr>
                        <th>캠핑장 이미지</th>
                        <th>캠핑장 이름</th>
                    </tr>
                </thead>
                <tbody>
                   <th:block th:each="entry : ${groupedByDate}">
                        <tr class="date-header">
                            <td colspan="2">
                                <button id="date-key-toggle" th:id="${entry.key + '-toggle'}" onclick="toggleVisibility('[[${entry.key}]]');">+</button>
                                <span th:text="${entry.key}"></span>
                            </td>
                        </tr>
                        <tr id="[[${entry.key}]]" style="display: none;">
                            <td colspan="2">
                                <div class="date-group">
                                    <th:block th:each="history : ${entry.value}">
                                        <div class="group-container">
                                            <span th:if="${history.gocamping.firstImageUrl != null}" class="recomtd">
                                                <a th:href="@{'/detailView?contentId=' + ${history.gocamping.contentId}}">
                                                    <img class="recomimg" th:src="${history.gocamping.firstImageUrl}" alt="Camping Image" style="width: 300px; height: auto;">
                                                </a>
                                            </span>
                                            <span th:if="${history.gocamping.firstImageUrl == null}" class="recomtd">
                                                <a th:href="@{'/detailView?contentId=' + ${history.gocamping.contentId}}">
                                                    <img class="recomimg" src="#" alt="Camping Image" style="width: 300px; height: auto;">
                                                </a>
                                            </span>
                                            <span th:text="${history.gocamping.facltNm}"></span>
                                        </div>
                                    </th:block>
                                </div>
                            </td>
                        </tr>
                    </th:block>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>
